(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{345:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("最近公司换了新项目，这边也是进入了新一轮的开发，当项目经理把需求发给我之后我开始了需求的分析和coding。不一会我便开始拉去代码在本地开始跑程序。")])]),s._v(" "),a("h2",{attrs:{id:"问题发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题发现"}},[s._v("#")]),s._v(" 问题发现")]),s._v(" "),a("p",[a("strong",[s._v("这次使用的是SqlServer数据库，之前并没有使用过，但是问题不大，我按照需求文档的步骤连接好SqlServer之后，启动SpringBoot项目，发现了一个报错，如下：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/default.jpg",alt:""}})]),s._v(" "),a("p",[s._v("刚开始我以为是SqlServer连接问题呢，于是便去查看数据库，发现数据库一切正常，我首先第一时间问了我的同事，他们是否有这样的问题，发现他们并没有，于是我便开始了我最拿手的环节，面向百度编程。")]),s._v(" "),a("h2",{attrs:{id:"开始解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始解决"}},[s._v("#")]),s._v(" 开始解决")]),s._v(" "),a("p",[s._v("具体报错信息是这样，于是我便开始了百度")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("报错："),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ERROR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("DruidDataSource")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateConnectionThread")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Druid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConnectionPool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Create")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1218864105")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" create connection "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SQLException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("jdbc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("sqlserver"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47.114")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".91")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".217")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1433")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DatabaseName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PileTestingSystem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" errorCode "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" state "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("08")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S01")]),s._v("\n")])])]),a("p",[a("code",[s._v("首先我进行了中文翻译")])]),s._v(" "),a("blockquote",[a("p",[s._v("中文翻译错误：c.a.d.p.DruidDataSource$CreateConnectionThread[Druid-ConnectionPool-Create-1218864105]创建连接SQLException，url:jdbc:sqlserver://47.114.91.217:1433;DatabaseName=PileTestingSystem，错误代码0，状态08S01\ncom.microsoft.sqlserver.jdbc.SQLServerException:驱动程序无法使用安全套接字层（SSL）加密建立到SQL Server的安全连接。错误：“客户端首选项[TLS12]不接受服务器选择的协议版本TLS10”。客户连接ID:c8434f3c-5f82-4cf2-b111-099e140f33d0\n在com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate（SQLServerConnection.java:2670）~[mssql-jdbc-6.4.0.jre8.jar:？]")])]),s._v(" "),a("p",[a("strong",[s._v("这个错误主要就是驱动程序无法使用安全套（SSL）加密建立到SQL Server的安全连接")])]),s._v(" "),a("h2",{attrs:{id:"解决方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),a("p",[a("strong",[s._v("最终在我的查询下，找到了两种解决方法，现在提供给大家")])]),s._v(" "),a("h3",{attrs:{id:"方法一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法一"}},[s._v("#")]),s._v(" 方法一")]),s._v(" "),a("p",[s._v("如果使用的是jdk1.8的话，先要找到自己安装JDK目录下的"),a("strong",[s._v("java.security")]),s._v("文件并进行修改，\n本人目录如下："),a("strong",[s._v("D:\\jdk\\jre\\lib\\security")]),s._v("下就会有这个"),a("strong",[s._v("java.security")]),s._v("文件\n具体的修改情况如下 ：")]),s._v(" "),a("p",[s._v("打开文件后，注释掉这三行代码（也就是在这三行代码之前加 # ）：")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("jdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disabledAlgorithms"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SSLv3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TLSv1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TLSv1")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RC4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MD5withRSA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DH")]),s._v(" keySize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EC")]),s._v(" keySize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("224")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3D")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ES_EDE_CBC")]),s._v("，anon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ninclude jdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("namedCurves\n")])])]),a("p",[s._v("然后重新启动项目，建立SQL Server的安全套连接就没有问题了。\n"),a("strong",[s._v("图片如下：")]),s._v(" "),a("strong",[s._v("没修改之前的java.security文件：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104645835.png",alt:"image-20230330104645835"}})]),s._v(" "),a("p",[a("strong",[s._v("修改之后的java.security文件：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104728125.png",alt:"image-20230330104728125"}})]),s._v(" "),a("h3",{attrs:{id:"方法二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法二"}},[s._v("#")]),s._v(" 方法二")]),s._v(" "),a("p",[s._v("打开文件后，找到这三行代码：")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("jdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disabledAlgorithms"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SSLv3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TLSv1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TLSv1")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RC4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MD5withRSA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DH")]),s._v(" keySize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EC")]),s._v(" keySize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("224")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3D")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ES_EDE_CBC")]),s._v("，anon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ninclude jdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("namedCurves\n")])])]),a("p",[s._v("然后去掉：其中的3DES_EDE_CBC,字符。（图片如下）\n然后重新启动项目，建立SQL Server的安全套连接就没有问题了。\n"),a("strong",[s._v("没修改之前的java.security文件：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104807347.png",alt:"image-20230330104807347"}})]),s._v(" "),a("p",[a("strong",[s._v("修改之后的java.security文件：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104824800.png",alt:"image-20230330104824800"}})]),s._v(" "),a("p",[a("strong",[s._v("到这里问题就解决了，这里想告诉大家，遇到之前没有碰到过的新问题，不要慌，先追溯本源，看看到底是哪里出错了，思路一定要清晰，实在没有头绪的话可以百度，利用好搜索引擎，你一定可以的!!!")])])])}),[],!1,null,null,null);a.default=e.exports}}]);